<!DOCTYPE html>
<html lang="id" ng-app="formApp">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Form Peminjaman Ruangan - SmartDoor Access</title>
  <meta name="description" content="Form Peminjaman Ruangan dengan integrasi WhatsApp dan spreadsheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link rel="stylesheet" href="../styles/form.css">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
</head>
<body ng-controller="FormController">
  <main class="container" role="main" ng-show="!done">
    <div>
    <h1>Form Peminjaman Ruangan</h1>
    <p class="instruction">Untuk mendapatkan kode SmartDoor, harap isi form peminjaman ruangan dengan lengkap.</p>
    <form name="bookingForm" ng-submit="submitForm()" novalidate>
      <div>
        <label>Nama Lengkap</label>
        <input type="text" name="nama" ng-model="formData.nama" required />
      </div>
      <div>
        <label>Subseksi / Wilayah / Acara</label>
        <input type="text" name="subseksi" ng-model="formData.subseksi" required />
      </div>
      <div>
        <label>Ruangan</label>
        <select name="ruangan" ng-model="formData.ruangan" ng-change="updateDisabledCheckboxes()" required>
          <option value="" disabled selected>Pilih ruangan</option>
          <option value="Kevin">Kevin</option>
          <option value="Natalia">Natalia</option>
        </select>
      </div>
      <div>
        <label>Tanggal Peminjaman</label>
        <input type="date" name="tanggal" ng-model="formData.tanggal" ng-change="updateDisabledCheckboxes()" min="{{today | date:'yyyy-MM-dd'}}" required />
      </div>
      <fieldset>
        <legend><span class="material-icons" aria-hidden="true">schedule</span>Waktu Peminjaman</legend>
        <div class="time">
          <p style="color:#999;" ng-if="!chosen">Silakan pilih ruangan dan tanggal untuk melihat waktu yang tersedia.</p>
          <div ng-if="waiting" class="loading">
                <div class="dots-loader">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
            </div>
          <label ng-repeat="waktu in waktuTersedia" ng-class="waktu.checked ? 'time-checkboxes-checked' : 'time-checkboxes'">
            <input type="checkbox" name="waktu" ng-value="waktu.label" ng-checked="waktu.checked" ng-disabled="waktu.disabled" ng-click="toggleWaktu(waktu)" />
            <span>{{ waktu.label }}</span>
          </label>
        </div>
      </fieldset>
      <div>
        <label>No WhatsApp</label>
        <input type="tel" name="wa" ng-model="formData.wa" ng-pattern="/^08[0-9]{8,12}$/" required />
      </div>
      <div>
        <label>Alasan Pemakaian Ruangan</label>
        <input type="text" name="Alasan" ng-model="formData.Alasan" required />
      </div>
      <button type="submit">Kirim Permintaan</button>
    </form>
    </div>
  </main>
      <div class="spinner-container" ng-show="done">
        <div class="spinner"></div>
        <b>Tunggu sebentar yaa...</b>
    </div>

<script src="../controller/form.js"></script>
</body>
</html>
